<template>
  <div class="home page">
    <div class="heroblock container">
      <div class="heroblock__blur">
        <img src="/src/assets/images/heroblock.png" class="heroblock__img" alt="bubuka">
        <img src="/src/assets/images/heroblock.png" class="heroblock__img-blur" alt="bubuka-blur">
      </div>
      <div class="heroblock__info">
        <h1 class="heroblock__title">
          Легальная музыкальная библиотека
        </h1>
        <p class="heroblock__text">
          Подходит продакшн-студиям, event-агентствам, театрам, радио, киностудиям. Создавай качественный контент с лицензионной музыкой.
        </p>
        <div class="heroblock__button button__bg button">
          Оставить заявку
        </div>
      </div>
    </div>
    <div class="home__content">
      <div class="home__list container">
        <track-cmp
          v-for="(item, index) in tracks"
          :id="item.id"
          :name="item.title"
          :author="item.artist"
          :time="item.duration"
          @click="startPlaylist(index, tracks)"
          :key="item.id"
        />
      </div>
      <div class="home__catalog button__border button">
        Перейти в каталог
      </div>
      <div class="home__svg">
        <svg width="1920" height="264" viewBox="0 0 1920 264" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g opacity="0.12">
        <path d="M0 259.69H18.6534V158.416H55.8838L121.404 259.69H192.425L106.175 127.712L189.984 4.30954H123.568L57.3282 105.943H18.6534V4.30954H0V6.3047H16.6534V107.938H58.4134L124.653 6.3047H186.213L103.773 127.69L188.733 257.695H122.493L56.9734 156.421H16.6534V257.695H0V259.69Z" fill="white"/>
        <path d="M1920 4.30954H1766.09V55.7049H1846.37V259.69H1907.97V55.7049H1920V53.7098H1905.97V257.695H1848.37V53.7098H1768.09V6.3047H1920V4.30954Z" fill="white"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M371.239 212.445C386.119 212.445 399.559 209.093 411.559 202.389C423.559 195.446 432.919 185.869 439.639 173.659C446.599 161.449 450.079 147.562 450.079 132C450.079 116.438 446.599 102.551 439.639 90.341C432.919 78.1306 423.559 68.6735 411.559 61.9698C399.559 55.0266 386.119 51.555 371.239 51.555C356.359 51.555 342.919 55.0266 330.919 61.9698C318.919 68.6735 309.439 78.1306 302.479 90.341C295.759 102.551 292.399 116.438 292.399 132C292.399 147.562 295.759 161.449 302.479 173.659C309.439 185.869 318.919 195.446 330.919 202.389C342.919 209.093 356.359 212.445 371.239 212.445ZM410.556 63.6956L410.569 63.7032L410.582 63.7106C422.25 70.2288 431.343 79.413 437.886 91.3012L437.893 91.3142L437.901 91.3272C444.671 103.205 448.079 116.745 448.079 132C448.079 147.255 444.671 160.795 437.901 172.673L437.893 172.686L437.886 172.699C431.343 184.588 422.245 193.897 410.569 200.656C398.895 207.175 385.8 210.45 371.239 210.45C356.678 210.45 343.584 207.174 331.91 200.656C320.231 193.896 311.009 184.583 304.225 172.685C297.69 160.805 294.399 147.261 294.399 132C294.399 116.739 297.69 103.195 304.225 91.3151C311.008 79.4187 320.226 70.2301 331.897 63.7106L331.91 63.7032L331.923 63.6956C343.596 56.9417 356.685 53.5502 371.239 53.5502C385.793 53.5502 398.883 56.9417 410.556 63.6956Z" fill="white"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M299.369 246.881L299.377 246.886C320.813 258.307 344.782 264 371.239 264C397.697 264 421.549 258.307 442.75 246.881C463.932 235.466 480.637 219.78 492.827 199.837L492.832 199.828C505.032 179.625 511.119 156.999 511.119 132C511.119 107.002 505.033 84.4923 492.828 64.5249C480.64 44.3441 463.936 28.5362 442.75 17.1189C421.549 5.6931 397.697 0 371.239 0C344.782 0 320.813 5.69318 299.377 17.1143L299.369 17.1189C278.181 28.5375 261.475 44.3476 249.286 64.5315L249.282 64.5376C237.323 84.5036 231.359 107.009 231.359 132C231.359 156.992 237.323 179.612 249.277 199.812L249.284 199.825L249.292 199.837C261.482 219.78 278.187 235.466 299.369 246.881ZM441.799 18.8742C462.679 30.127 479.119 45.6892 491.119 65.5611C503.119 85.1935 509.119 107.34 509.119 132C509.119 156.66 503.119 178.926 491.119 198.798C479.119 218.43 462.679 233.873 441.799 245.126C420.919 256.378 397.399 262.005 371.239 262.005C345.079 262.005 321.439 256.378 300.319 245.126C279.439 233.873 262.999 218.43 250.999 198.798C239.239 178.926 233.359 156.66 233.359 132C233.359 107.34 239.239 85.1935 250.999 65.5611C262.999 45.6892 279.439 30.127 300.319 18.8742C321.439 7.62152 345.079 1.99516 371.239 1.99516C397.399 1.99516 420.919 7.62152 441.799 18.8742Z" fill="white"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M760.846 259.69H823.166V4.30954H760.846V103.429H650.366V4.30954H588.046V259.69H650.366V156.62H760.846V259.69ZM648.366 105.424H762.846V6.3047H821.166V257.695H762.846V154.625H648.366V257.695H590.046V6.3047H648.366V105.424Z" fill="white"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M1034.26 55.7049H1114.9V4.30954H892.384V55.7049H972.664V259.69H1034.26V55.7049ZM974.664 257.695V53.7098H894.384V6.3047H1112.9V53.7098H1032.26V257.695H974.664Z" fill="white"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M1382.64 259.69V209.013H1245.48V154.825H1362.48V105.584H1245.48V54.9867H1377.96V4.30954H1183.52V259.69H1382.64ZM1360.48 152.829H1243.48V211.008H1380.64V257.695H1185.52V6.3047H1375.96V52.9915H1243.48V107.579H1360.48V152.829Z" fill="white"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M1634.55 259.69H1696.87V4.30954H1634.55V103.429H1524.07V4.30954H1461.75V259.69H1524.07V156.62H1634.55V259.69ZM1522.07 105.424H1636.55V6.3047H1694.87V257.695H1636.55V154.625H1522.07V257.695H1463.75V6.3047H1522.07V105.424Z" fill="white"/>
        </g>
        </svg>
      </div>
    </div>
    <div class="home__tarifs">
      <div class="home__svg">
        <svg width="1920" height="278" viewBox="0 0 1920 278" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path opacity="0.12" fill-rule="evenodd" clip-rule="evenodd" d="M222.958 62.329H142.159V266.838H80.4381V62.329H0V10.8015H222.958V62.329ZM82.442 60.3287V264.838H140.155V60.3287H220.954V12.8018H2.00394V60.3287H82.442ZM474.375 264.838L452.011 210.83H334.78L312.416 264.838H252.539L365.08 12.8018H422.793L535.695 264.838H474.375ZM336.12 212.831L313.756 266.838H249.452L363.779 10.8015H424.092L538.786 266.838H473.035L450.671 212.831H336.12ZM393.576 70.0501L353.537 166.544H433.615L393.576 70.0501ZM393.576 75.2774L356.536 164.544H430.616L393.576 75.2774ZM812.535 153.951C803.404 167.991 790.343 178.791 773.44 186.371L773.428 186.377C756.765 193.714 737.119 197.348 714.545 197.348H665.689V266.838H603.246V10.8015H714.545C737.125 10.8015 756.777 14.5574 773.445 22.141C790.346 29.7211 803.405 40.5199 812.535 54.5589C821.673 68.611 826.204 85.2044 826.204 104.255C826.204 123.072 821.67 139.657 812.543 153.938L812.535 153.951ZM772.619 23.9634C756.267 16.5224 736.909 12.8018 714.545 12.8018H605.25V264.838H663.685V195.348H714.545C736.909 195.348 756.267 191.748 772.619 184.547C789.211 177.105 801.956 166.544 810.854 152.862C819.751 138.94 824.2 122.738 824.2 104.255C824.2 85.5323 819.751 69.33 810.854 55.648C801.956 41.966 789.211 31.4045 772.619 23.9634ZM750.058 73.3904L750.046 73.3804C741.406 66.1175 728.596 62.329 711.298 62.329H665.689V145.821H711.298C728.6 145.821 741.416 142.15 750.058 135.12C758.658 127.885 763.04 117.691 763.04 104.255C763.04 90.5589 758.646 80.3837 750.07 73.4003L750.058 73.3904ZM751.337 136.66C742.199 144.101 728.853 147.821 711.298 147.821H663.685V60.3287H711.298C728.853 60.3287 742.199 64.1692 751.337 71.8503C760.475 79.2914 765.044 90.093 765.044 104.255C765.044 118.177 760.475 128.979 751.337 136.66ZM896.815 10.8015H958.897V170.869L1076.35 10.8015H1134.2V266.838H1072.48V107.12L955.022 266.838H896.815V10.8015ZM1074.48 101.015V264.838H1132.2V12.8018H1077.37L956.893 176.985V12.8018H898.819V264.838H954.007L1074.48 101.015ZM1497.19 218.481L1497.19 218.483C1474.47 237.538 1442.04 248.142 1400.15 250.531V278H1342.39V250.161C1300.26 247.541 1267.59 236.819 1244.64 217.769L1244.64 217.762L1244.63 217.754C1221.52 198.127 1210.01 171.498 1210.01 138.1C1210.01 104.467 1221.52 77.9442 1244.65 58.7893C1267.59 39.7415 1300.26 28.9025 1342.39 26.0492V0H1400.15V25.6794C1442.05 28.3045 1474.48 39.148 1497.19 58.442C1520.54 78.0666 1532.17 104.696 1532.17 138.1C1532.17 171.976 1520.54 198.85 1497.19 218.481ZM1398.14 27.5639V2.00029H1344.4V27.923C1301.59 30.5634 1268.77 41.366 1245.93 60.3287C1223.32 79.0514 1212.02 104.975 1212.02 138.1C1212.02 170.985 1223.32 197.028 1245.93 216.231C1268.77 235.194 1301.59 245.875 1344.4 248.276V276H1398.14V248.636C1440.71 246.475 1473.29 235.914 1495.9 216.951C1518.74 197.748 1530.16 171.465 1530.16 138.1C1530.16 105.215 1518.74 79.1714 1495.9 59.9686C1473.29 40.7659 1440.71 29.9643 1398.14 27.5639ZM1288.34 94.6204C1276.63 104.476 1270.65 118.859 1270.65 138.1C1270.65 156.571 1276.78 170.862 1288.89 181.228C1300.72 191.35 1318.47 197.903 1342.39 200.676V75.8582C1317.98 78.3974 1300.05 84.7294 1288.34 94.6204ZM1342.39 73.8472C1317.67 76.3925 1299.22 82.8079 1287.05 93.0934C1274.78 103.415 1268.65 118.417 1268.65 138.1C1268.65 175.52 1293.23 197.05 1342.39 202.69C1343.06 202.766 1343.73 202.839 1344.4 202.909V73.6506C1343.73 73.7133 1343.06 73.7789 1342.39 73.8472ZM1453.83 181.946C1442.12 191.833 1424.32 198.16 1400.15 200.699V75.8418C1424.09 78.1599 1441.84 84.435 1453.66 94.4393C1465.76 104.677 1471.89 119.019 1471.89 137.74C1471.89 156.96 1465.81 171.598 1453.83 181.946ZM1398.14 202.909C1398.82 202.846 1399.48 202.78 1400.15 202.711C1424.63 200.164 1442.96 193.749 1455.14 183.466C1467.64 172.665 1473.89 157.423 1473.89 137.74C1473.89 99.8457 1449.31 78.5432 1400.15 73.8323C1399.48 73.7687 1398.82 73.7081 1398.14 73.6506V202.909ZM1801.68 244.055L1801.68 244.057C1783.17 259.336 1757.16 266.838 1723.93 266.838H1607.95V10.8015H1670.03V93.6135H1732.23C1763.28 93.6135 1787.37 100.511 1804.22 114.604C1821.38 128.759 1829.82 149.674 1829.82 176.985C1829.82 206.01 1820.51 228.474 1801.68 244.055ZM1802.93 116.137C1786.58 102.455 1763.01 95.6137 1732.23 95.6137H1668.02V12.8018H1609.95V264.838H1723.93C1756.88 264.838 1782.37 257.397 1800.41 242.515C1818.68 227.393 1827.82 205.55 1827.82 176.985C1827.82 150.102 1819.52 129.819 1802.93 116.137ZM1754.72 208.964L1754.73 208.955C1762.84 201.983 1767.02 191.798 1767.02 178.066C1767.02 165.414 1763.14 156.248 1755.67 150.183C1748.13 144.054 1736.58 140.82 1720.69 140.82H1670.03V219.632H1720.69C1735.52 219.632 1746.77 215.992 1754.71 208.973L1754.72 208.964ZM1668.02 221.632V138.82H1720.69C1752.91 138.82 1769.02 151.902 1769.02 178.066C1769.02 192.228 1764.69 203.029 1756.04 210.47C1747.62 217.911 1735.84 221.632 1720.69 221.632H1668.02ZM1857.92 10.8015H1920V266.838H1857.92V10.8015ZM1859.92 12.8018V264.838H1918V12.8018H1859.92Z" fill="white"/>
        </svg>  
      </div>
      <div class="home__tarifs-list container">
        <tarif-cmp
          v-for="item in tarifs"
          class="home__tarif"
          :name="item.name"
          :id="item.id"
          :altName="item.altName"
          :about="item.description"
          :price="item.price"
          @request="toRequest"
          :key="`tarif-${item.id}`" 
        />
      </div>
       <swiper ref="mySwiper" class="home__slider" :options="swiperOptions">
        <swiper-slide
          v-for="item in tarifs"
          class="home__slide"
          :key="`tarif-${item.id}`" 
        >
          <tarif-cmp
            class="home__tarif"
            :name="item.name"
            :id="item.id"
            :altName="item.altName"
            :about="item.description"
            :price="item.price"
            @request="toRequest"
          />
        </swiper-slide>
      </swiper>
      <div class="swiper-pagination" slot="pagination"></div>
    </div>
  </div>
</template>

<script>
import Track from '@components/track'
import Tarif from '@components/tarif-card'
import { Swiper, SwiperSlide, directive } from 'vue-awesome-swiper'
import "swiper/dist/css/swiper.css"
import getTariffs from '@components/mixins/getTariffs'
import getTracks from '@components/mixins/getTracks'
import {mapMutations, mapGetters} from 'vuex';

export default {
  name: 'home',
  components: {
    'track-cmp': Track,
    'tarif-cmp': Tarif,
    Swiper,
    SwiperSlide
  },
  directives: {
    swiper: directive
  },
  mixins: [getTariffs, getTracks],
  data () {
    return {
      swiperOptions: {
        slidesPerView: 'auto',
        spaceBetween: 58,
        centeredSlides: true,
        pagination: {
          el: '.swiper-pagination'
        }
      },
      mocTracks: [
        {
          id: 1,
          title: 'песня1',
          artist: 'автор1',
          duration: '24:34',
          src: 'src/assets/images/sample1.mp3'
        },
        {
          id: 2,
          title: 'песня2',
          artist: 'автор2',
          duration: '24:34',
          src: 'src/assets/images/sample2.mp3'
        },
        {
          id: 3,
          title: 'песня3',
          artist: 'автор3',
          duration: '24:34',
          src: 'src/assets/images/sample3.mp3'
        },
        {
          id: 4,
          title: 'песня4',
          artist: 'автор4',
          duration: '24:34',
          src: 'src/assets/images/sample4.mp3'
        }
      ]
    }
  },
  computed: {
    ...mapGetters('playlist', ['getTrack']),
    swiper() {
      return this.$refs.mySwiper.$swiper
    },
    tariffsOptions() {
      let array = this.tarifs.map((tarif) => {
        return {
          id: tarif.id,
          name: `Тариф «${tarif.name}»`
        }
      });
      return array
    }
  },
  methods: {
    ...mapMutations('playlist', ['setPlaylist']),
    startPlaylist(index, traks) {
      this.setPlaylist({
        playlist: traks,
        index
      })
    }
  },
  mounted () {
    this.swiper.slideTo(1, 1000, false)
  }
}
</script>

<style lang="sass">
@import '~@styles/pages/index.sass'
</style>